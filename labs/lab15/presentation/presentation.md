---
## Front matter
lang: ru-RU
title: Управление логическими томами
subtitle: Часть 1
author:
  - Славинский В.В.
institute:
  - Российский университет дружбы народов, Москва, Россия Россия
date: 14 декабря 2025

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
---

# Информация

## Докладчик

:::::::::::::: {.columns align=center}
::: {.column width="70%"}

  * Славинский Владислав Вадимович
  * Студент
  * Российский университет дружбы народов
  * [1132246169@pfur.ru]

:::
::: {.column width="30%"}

# Вводная часть

## Комментирование строк

В терминале с полномочиями администратора в файле /etc/fstab закомментируем строки автомонтирования /mnt/data и /mnt/data-ext.

![sc1](./image/1.png)

## Монтирование

Отмонтируем /mnt/data и /mnt/data-ext: umount /mnt/data, umount /mnt/data-ext.

![sc2](./image/2.png)

## Проверка

С помощью команды mount без параметров убедимся, что диски /dev/sdb и /dev/sdc не подмонтированы.

![sc3](./image/3.png)

## Создание новой разметки

С помощью fdisk сделаем новую разметку для /dev/sdb и /dev/sdc, удалив ранее
созданные партиции.

![sc4](./image/4.png)

## Запись изменений

Запишем изменения в таблицу разделов ядра: partprobe /dev/sdb. 

![sc5](./image/5.png)

## Просмотр информации

Просмотрим информацию о разделах: cat /proc/partitions, fdisk --list /dev/sdb.

![sc6](./image/6.png)

## Создание раздела с LVM типа

В терминале с полномочиями администратора с помощью fdisk создадим основной
раздел с типом LVM 

![sc7](./image/7.png)

## Обновление таблицы разделов и указание на физический том

Обновим таблицу разделов. Укажем раздел как физический том LVM. Для этого введите: pvcreate /dev/sdb1

![sc8](./image/8.png)

## Проверка информации

Теперь введем pvs, чтобы убедиться, что физический том создан успешно.

![sc9](./image/9.png)

## Создание группы томов

Создадим группу томов с присвоенным ей физическим томом: vgcreate vgdata /dev/sdb1. Далее убедимся, что группа томов была успешно создана с помощью vgs, pvs

![sc10](./image/10.png)

## Создание логического тома

Введем команду vcreate -n lvdata -l 50%FREE vgdata , она создаст логический том LVM с именем lvdata, который будет использовать 50% доступного дискового пространства в группе томов vgdata и для проверки введем lvs.

![sc11](./image/11.png)

## Создание файловой системы и создание папки для монтирования

На этом этапе мы готовы создать файловую систему поверх логического тома. Для этого введем mkfs.ext4 /dev/vgdata/lvdata. После этого создадим папку, на которую можно смонтировать том mkdir -p /mnt/data

![sc12](./image/12.png)

## Добавление строки в /etc/fstab

Добавим следующую строку в /etc/fstab: /dev/vgdata/lvdata /mnt/data ext4 defaults 1 2.

![sc13](./image/13.png)

## Проверка

Проверим, монтируется ли файловая система mount -a,  mount | grep /mnt.

![sc14](./image/14.png)

## Отображение текущей конфигураций физических томов и групп

В терминале с полномочиями администратора введем pvs и vgs, чтобы отобразить
текущую конфигурацию физических томов и группы томов.

![sc15](./image/15.png)

## Создание раздела

С помощью fdisk добавим раздел /dev/sdb2 размером 100 М. Зададим тип раздела 8e.

![sc16](./image/16.png)

## Создание физического тома и расширение vgdata

Создадим физический том: pvcreate /dev/sdb2. Расширим vgdata: vgextend vgdata /dev/sdb2.

![sc17](./image/17.png)

## Проверка размера файловой системы

Проверим текущий размер файловой системы на lvdata: df -h.

![sc18](./image/18.png)

## Увеличение lvdata на 50%

Увеличим lvdata на 50% оставшегося доступного дискового пространства в группе томов: lvextend -r -l +50%FREE /dev/vgdata/lvdata

![sc19](./image/19.png)

## Проверка

Убедиимся, что добавленное дисковое пространство стало доступным: lvs, df -h.

![sc20](./image/20.png)

## Уменьшение lvdata на 50 МБ

Уменьшим размер lvdata на 50 МБ: lvreduce -r -L -50M /dev/vgdata/lvdata. 

![sc21](./image/21.png)

## Проверка

Убедимся в успешном изменении дискового пространства: lvs, df -h.

![sc22](./image/22.png)

